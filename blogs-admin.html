<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Blogs Admin Panel</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body, .font-sans { font-family: 'Poppins', ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'; }
    @media (max-width: 767px) {
      #sidebar { position: fixed; top: 0; left: 0; height: 100vh; z-index: 40; }
      #sidebar-overlay { display: block; }
      .sidebar-link { width: 100%; text-align: center; }
    }
  </style>
</head>
<body class="bg-[#f7fafc] min-h-screen">
  <div id="sidebar-overlay" class="fixed inset-0 bg-black/40 z-30 hidden md:hidden"></div>
  <div class="flex flex-col md:flex-row min-h-screen">
    <!-- Topbar for mobile -->
    <div class="flex md:hidden items-center justify-between bg-[#222] text-white px-4 py-3 z-40">
      <h1 class="text-xl font-bold tracking-tight">Blogs Admin</h1>
      <button id="sidebar-toggle" class="focus:outline-none" aria-label="Open sidebar">
        <svg class="w-7 h-7" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16"/></svg>
      </button>
    </div>
    <!-- Responsive Sidebar/Topbar -->
    <aside id="sidebar" class="fixed md:static top-0 left-0 h-full w-64 bg-[#222] text-white flex-col py-8 px-6 z-40 transform -translate-x-full md:translate-x-0 transition-transform duration-200 ease-in-out md:flex md:relative md:translate-x-0 md:w-64 md:h-auto md:py-8 md:px-6 flex md:flex-col">
      <div class="flex items-center justify-between mb-8 md:mb-10">
        <h1 class="text-xl md:text-2xl font-bold tracking-tight">Blogs Admin</h1>
        <button id="sidebar-close" class="md:hidden text-gray-400 hover:text-white text-2xl" aria-label="Close sidebar">&times;</button>
      </div>
      <nav class="flex flex-col gap-2">
        <a href="#insights-section" class="sidebar-link bg-[#2a3f4d] text-white rounded-lg px-3 md:px-4 py-2 font-medium transition-colors text-sm md:text-base">Insights & Resources</a>
        <!-- Career Opportunities link removed -->
      </nav>
    </aside>
    <main class="flex-1 p-4 md:p-10 w-full">
      <div id="insights-section">
        <!-- Insights section -->
        <h2 class="text-2xl md:text-3xl font-bold mb-4">Insights & Resources</h2>
        <p class="text-gray-600 mb-6 md:mb-8">Manage blog posts, articles, and resources here.</p>
        <div class="mb-4 md:mb-6">
          <button id="add-post-btn" class="px-4 py-2 bg-[#76B1B8] text-white rounded-lg hover:opacity-90 transition-opacity font-medium w-full sm:w-auto">Add New Post</button>
        </div>
        <div id="posts-list" class="space-y-4 md:space-y-6"></div>

        <!-- Post modal -->
        <div id="post-modal" class="fixed inset-0 bg-black/40 flex items-center justify-center z-50 hidden overflow-y-auto py-8">
          <div class="bg-white rounded-2xl p-4 sm:p-8 w-full max-w-xs sm:max-w-2xl relative mx-2 my-auto max-h-[90vh] overflow-y-auto">
            <button id="close-modal-btn" class="absolute top-4 right-4 text-gray-400 hover:text-gray-700 text-2xl">&times;</button>
            <h3 id="modal-title" class="text-xl font-bold mb-6">Add Post</h3>
            <form id="post-form" class="space-y-4">
              <div>
                <label class="block text-sm mb-1 font-medium">Image</label>
                <input type="file" id="post-image" accept="image/*" class="mb-2" />
                <div id="post-image-preview" class="mb-2"></div>
              </div>
              <div>
                <label class="block text-sm mb-1 font-medium">Title</label>
                <input type="text" id="post-title" class="w-full px-3 py-2 border border-gray-300 rounded-lg" required />
              </div>
              <div>
                <label class="block text-sm mb-1 font-medium">Short Description (Card Preview)</label>
                <textarea id="post-content" class="w-full px-3 py-2 border border-gray-300 rounded-lg h-20 resize-none" required placeholder="Brief description shown on the card..."></textarea>
              </div>
              <div>
                <label class="block text-sm mb-1 font-medium">Full Content (Read More Page)</label>
                <textarea id="post-full-content" class="w-full px-3 py-2 border border-gray-300 rounded-lg h-40 resize-none" placeholder="Write the full article content here..."></textarea>
                <p class="text-xs text-gray-400 mt-1">Tips: Use blank line for new paragraph, - for bullet points, **text** for bold</p>
              </div>
              <div class="flex justify-end gap-2">
                <button type="submit" class="px-4 py-2 bg-[#76B1B8] text-white rounded-lg hover:opacity-90 transition-opacity font-medium">Save</button>
              </div>
            </form>
          </div>
        </div>
      </div>

      <!-- Career Opportunities section removed -->
    </main>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      // --- Constants & Config ---
      const postsKey = 'insightsPosts';
      // const careerKey = 'careerPosts';

      const initialPosts = [
        { title: 'The Hidden Cost of "Good Enough"', content: 'Templates promise convenience, but what they actually deliver is compromise.', fullContent: `Templates promise convenience.

What they actually deliver is compromise.

You inherit:
- Layouts designed for averages, not your audience
- Structures built for aesthetics, not conversion
- Code bloated with features you will never use
- Limitations you only discover once you try to scale

The cost is not the template itself.

The cost is everything it prevents you from doing later.

**Growth demands flexibility. Templates resist it.**`, image: 'https://images.unsplash.com/photo-1503676382389-4809596d5290?auto=format&fit=crop&w=600&q=80' },
        { title: "Custom Isn't About Design. It's About Leverage.", content: "A custom website isn't about looking different for the sake of it. It's about aligning every element with intent.", fullContent: `A custom website is not about looking different for the sake of it.

It is about aligning every element with intent.

- Pages built around user behavior, not theme demos
- Messaging structured to guide decisions, not fill space
- Performance optimized for your exact goals
- Integrations that work seamlessly with your CRM, automations, and workflows

**Custom gives you leverage.**

**Templates give you a ceiling.**`, image: 'https://images.unsplash.com/photo-1465101046530-73398c7f28ca?auto=format&fit=crop&w=600&q=80' },
        { title: 'Why Templates Win the Market (And Lose the War)', content: "Templates are popular because they're easy to sell: Faster timelines, lower upfront cost, familiar visuals.", fullContent: `Templates are popular because they are easy to sell:
- Faster timelines
- Lower upfront cost
- Familiar visuals

But familiarity does not convert.

**Clarity does.**

Your audience does not care what theme you used.

They care whether the site understands them.

Most templated sites speak at users.

**Custom sites are built to speak to them.**`, image: 'https://images.unsplash.com/photo-1464983953574-0892a716854b?auto=format&fit=crop&w=600&q=80' },
        { title: 'Our Philosophy at Pixelhive', content: "We don't start with layouts. We start with questions that drive business results.", fullContent: `We do not start with layouts.

We start with questions.

- What should this site do for the business?
- Where should attention go first?
- What action matters most?
- What systems should this connect to behind the scenes?

Only after those answers are clear do we design and build.

**That is how websites stop being digital brochures and start becoming infrastructure.**`, image: 'https://images.unsplash.com/photo-1465101046530-73398c7f28ca?auto=format&fit=crop&w=600&q=80' },
        { title: 'The Long Game Always Wins', content: 'If your goal is to grow, scale, and build authority, custom beats templated every time.', fullContent: `If your goal is to simply "have a website," a template will do.

If your goal is to grow, scale, and build authority, it will not.

**Custom beats templated every time**â€”not because it is more complex, but because it is more intentional.

And intention is what turns traffic into trust, and trust into growth.

At Pixelhive, we do not build websites to blend in.

**We build them to perform.**`, image: 'https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=600&q=80' }
      ];

      // Career Opportunities data removed


      // Always reset Insights & Resources to match blogs.html cards on every load
      localStorage.setItem(postsKey, JSON.stringify(initialPosts));
      // Removed Career Opportunities localStorage init

      // --- Sidebar Navigation ---
      const sections = ['insights-section'];
      const links = document.querySelectorAll('.sidebar-link');
      function showSection(id) {
        sections.forEach(sec => {
          const el = document.getElementById(sec);
          if (el) {
            if (sec === id) {
              el.classList.remove('hidden');
            } else {
              el.classList.add('hidden');
            }
          }
        });
        links.forEach(link => {
          const href = link.getAttribute('href').replace('#', '');
          if (href === id) {
            link.classList.add('bg-[#2a3f4d]', 'text-white');
            link.classList.remove('text-gray-300');
          } else {
            link.classList.remove('bg-[#2a3f4d]', 'text-white');
            link.classList.add('text-gray-300');
          }
        });
      }
      links.forEach(link => {
        link.addEventListener('click', function (e) {
          e.preventDefault();
          const target = this.getAttribute('href').replace('#', '');
          showSection(target);
          document.querySelector('main').scrollIntoView({ behavior: 'smooth' });
        });
      });
      showSection('insights-section');

      // --- Insights & Resources CRUD ---
      const postsList = document.getElementById('posts-list');
      const addBtn = document.getElementById('add-post-btn');
      const modal = document.getElementById('post-modal');
      const closeModalBtn = document.getElementById('close-modal-btn');
      const postForm = document.getElementById('post-form');
      const postTitle = document.getElementById('post-title');
      const postContent = document.getElementById('post-content');
      const postFullContent = document.getElementById('post-full-content');
      const modalTitle = document.getElementById('modal-title');
      const postImage = document.getElementById('post-image');
      const postImagePreview = document.getElementById('post-image-preview');
      let editIdx = null;
      let imageData = null;

      function getPosts() {
        const data = localStorage.getItem(postsKey);
        if (data) { try { return JSON.parse(data); } catch { return []; } }
        return [];
      }
      function setPosts(posts) {
        localStorage.setItem(postsKey, JSON.stringify(posts));
      }
      function renderPosts() {
        const posts = getPosts();
        postsList.innerHTML = '';
        if (!posts.length) {
          postsList.innerHTML = '<div class="text-gray-400 italic">No posts yet.</div>';
          return;
        }
        postsList.innerHTML = '<div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6" id="insights-cards-grid"></div>';
        const grid = postsList.querySelector('#insights-cards-grid');
        posts.forEach((post, idx) => {
          const div = document.createElement('div');
          div.className = 'bg-white rounded-xl p-4 border border-gray-200 shadow-sm flex flex-col relative max-w-sm mx-auto';
          div.innerHTML = `
            ${post.image ? `<img src="${post.image}" class="w-full h-40 object-cover rounded-xl mb-3">` : ''}
            <div class="flex items-center justify-between mb-1">
              <span></span>
              <div class="flex gap-2 text-base">
                <button class="edit-post-btn hover:text-[#76B1B8] transition-colors" title="Edit" data-idx="${idx}">
                  <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path d="M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"/><path d="m15 5 4 4"/></svg>
                </button>
                <button class="delete-post-btn hover:text-[#E0595D] transition-colors" title="Delete" data-idx="${idx}">
                  <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/></svg>
                </button>
              </div>
            </div>
            <h4 class="text-lg font-bold mb-1 text-[#181818]">${post.title}</h4>
            <p class="text-[14px] text-[#444] mb-1">${post.content.replace(/\n/g, '<br>')}</p>
          `;
          grid.appendChild(div);
        });
        // Edit buttons
        grid.querySelectorAll('.edit-post-btn').forEach(btn => {
          btn.addEventListener('click', function() {
            const idx = +this.dataset.idx;
            const posts = getPosts();
            editIdx = idx;
            postTitle.value = posts[idx].title;
            postContent.value = posts[idx].content;
            postFullContent.value = posts[idx].fullContent || '';
            // Show image preview if exists
            if (posts[idx].image) {
              postImagePreview.innerHTML = `<img src="${posts[idx].image}" class="w-full h-32 object-cover rounded mb-2">`;
            } else {
              postImagePreview.innerHTML = '';
            }
            postImage.value = '';
            imageData = null;
            modalTitle.textContent = 'Edit Post';
            modal.classList.remove('hidden');
          });
        });
        // Delete buttons
        grid.querySelectorAll('.delete-post-btn').forEach(btn => {
          btn.addEventListener('click', function() {
            const idx = +this.dataset.idx;
            if (confirm('Delete this post?')) {
              const posts = getPosts();
              posts.splice(idx, 1);
              setPosts(posts);
              renderPosts();
            }
          });
        });
      }
      addBtn.addEventListener('click', function() {
        editIdx = null;
        postForm.reset();
        postImagePreview.innerHTML = '';
        postFullContent.value = '';
        imageData = null;
        modalTitle.textContent = 'Add Post';
        modal.classList.remove('hidden');
      });
      closeModalBtn.addEventListener('click', function() {
        modal.classList.add('hidden');
      });
      postImage.addEventListener('change', function(e) {
        const file = e.target.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = function(evt) {
            imageData = evt.target.result;
            postImagePreview.innerHTML = `<img src="${imageData}" class="w-full h-32 object-cover rounded mb-2">`;
          };
          reader.readAsDataURL(file);
        } else {
          imageData = null;
          postImagePreview.innerHTML = '';
        }
      });
      postForm.addEventListener('submit', function(e) {
        e.preventDefault();
        const title = postTitle.value.trim();
        const content = postContent.value.trim();
        const fullContent = postFullContent.value.trim();
        const posts = getPosts();
        let image = imageData;
        if (editIdx !== null) {
          // If no new image, keep old image
          if (!image) image = posts[editIdx].image;
        }
        if (!title || !content) return;
        if (editIdx !== null) {
          posts[editIdx] = { ...posts[editIdx], title, content, fullContent, image };
        } else {
          posts.unshift({ title, content, fullContent, image });
        }
        setPosts(posts);
        renderPosts();
        modal.classList.add('hidden');
        imageData = null;
      });
      // Hide modal on outside click
      modal.addEventListener('click', function(e) {
        if (e.target === modal) modal.classList.add('hidden');
      });

      // Career Opportunities CRUD removed

      // Sidebar toggle for mobile
      const sidebar = document.getElementById('sidebar');
      const sidebarToggle = document.getElementById('sidebar-toggle');
      const sidebarClose = document.getElementById('sidebar-close');
      const sidebarOverlay = document.getElementById('sidebar-overlay');
      function openSidebar() {
        sidebar.classList.remove('-translate-x-full');
        sidebarOverlay.classList.remove('hidden');
      }
      function closeSidebar() {
        sidebar.classList.add('-translate-x-full');
        sidebarOverlay.classList.add('hidden');
      }
      if (sidebarToggle) sidebarToggle.addEventListener('click', openSidebar);
      if (sidebarClose) sidebarClose.addEventListener('click', closeSidebar);
      if (sidebarOverlay) sidebarOverlay.addEventListener('click', closeSidebar);
      // Always close sidebar on resize to md+
      window.addEventListener('resize', function() {
        if (window.innerWidth >= 768) {
          closeSidebar();
        }
      });

      // Initial Render
      // renderCareers() removed
      renderPosts();
    });
  </script>
</body>
</html>